<SelectBox
  @classNamePrefix="tag-select"
  @value={{@value}}
  @search-min-chars={{0}}
  @search-delay-time={{0}}
  @on-press-escape={{action "close"}}
  @on-press-down={{action "pressedDown"}}
  @on-press-up={{action "pressedUp"}}
  @on-click-outside={{action "close"}}
  @on-select={{action "addTag"}}
  @on-search={{action "updateAvailableTags" @on-search}} as |sb|>

  <sb.selectedOptions>
    {{#each @value as |tag|}}
      <sb.selectedOption>
        {{tag}}
        {{! template-lint-disable invalid-interactive }}
        <span
          onclick={{action "removeTag" tag}}
          class="tag-select-remove">
          &times;
        </span>
      </sb.selectedOption>
    {{/each}}
  </sb.selectedOptions>

  <sb.input
    autofocus={{true}}
    @click={{action "reveal" sb @on-search}}
    @on-input={{sb.open}}
    @on-delete={{action "removeTag" @value.lastObject}} />

  {{#if sb.isOpen}}
    <sb.options>
      {{#if this.availableTags.length}}
        {{#each this.availableTags as |tag|}}
          <sb.option @value={{tag}}>{{tag}}</sb.option>
        {{/each}}
      {{else if this.newTag}}
        <sb.option @value={{this.newTag}}>
          No tag found<br>
          Add {{this.newTag}}...
        </sb.option>
      {{/if}}
    </sb.options>
  {{/if}}
</SelectBox>