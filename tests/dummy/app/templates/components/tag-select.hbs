<SelectBox
  @classNamePrefix="tag-select"
  @value={{@value}}
  @searchMinChars={{0}}
  @searchDelayTime={{0}}
  @onPressEscape={{action "close"}}
  @onPressDown={{action "pressedDown"}}
  @onPressUp={{action "pressedUp"}}
  @onClickOutside={{action "close"}}
  @onSelect={{action "addTag"}}
  @onSearch={{action "updateAvailableTags" @onSearch}} as |sb|>

  <sb.selectedOptions>
    {{#each @value as |tag|}}
      <sb.selectedOption>
        {{tag}}
        {{! template-lint-disable invalid-interactive }}
        <span
          onclick={{action "removeTag" tag}}
          class="tag-select-remove">
          &times;
        </span>
      </sb.selectedOption>
    {{/each}}
  </sb.selectedOptions>

  <sb.input
    autofocus={{true}}
    @click={{action "reveal" sb @onSearch}}
    @onInput={{sb.open}}
    @onDelete={{action "removeTag" @value.lastObject}} />

  {{#if sb.isOpen}}
    <sb.options>
      {{#if this.availableTags.length}}
        {{#each this.availableTags as |tag|}}
          <sb.option @value={{tag}}>{{tag}}</sb.option>
        {{/each}}
      {{else if this.newTag}}
        <sb.option @value={{this.newTag}}>
          No tag found<br>
          Add {{this.newTag}}...
        </sb.option>
      {{/if}}
    </sb.options>
  {{/if}}
</SelectBox>