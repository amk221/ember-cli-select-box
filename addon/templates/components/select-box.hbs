<div
  {{did-insert (action "handleInsertElement")}}
  {{will-destroy (action "handleDestroyElement")}}
  {{on "focusin" (action "handleFocusIn")}}
  {{on "focusout" (action "handleFocusOut")}}
  {{on "keydown" (action "handleKeyDown")}}
  {{on "keypress" (action "handleKeyPress")}}
  aria-expanded={{if this.isOpen "true" "false"}}
  aria-busy={{if this.isBusy "true" "false"}}
  aria-disabled={{if this.isDisabled "true" "false"}}
  aria-multiselectable={{if this.isMultiple "true" "false"}}
  aria-activedescendant={{this.activeOption.id}}

  {{! Issue: https://github.com/emberjs/rfcs/issues/497 }}

  class={{concat
    this.className
    (if @class (concat " " @class))
    (if this.isOpen (concat " " this.className "--open"))
    (if this.isFocused (concat " " this.className "--focused"))
    (if this.isDisabled (concat " " this.className "--disabled"))
    (if this.isMultiple (concat " " this.className "--multiple"))
    (if this.isBusy (concat " " this.className "--busy"))
  }}
  id={{this.id}}
  multiple={{this.isMultiple}}
  role={{this.role}}
  tabindex={{this.tabIndex}}
  ...attributes>
  {{#let (hash
    Options=(component "select-box/options"
      classNamePrefix=@classNamePrefix
      _onInit=(action "handleInitOptionsContainer")
      _onDestroy=(action "handleDestroyOptionsContainer"))
    Option=(component "select-box/option"
      selectBox=this
      classNamePrefix=@classNamePrefix
      _onActivate=(action "handleActivateOption")
      _onSelect=(action "handleSelectOption")
      _onDestroy=(action "handleDestroyOption")
      _onInit=(action "handleInitOption"))
    SelectedOptions=(component "select-box/selected-options"
      classNamePrefix=@classNamePrefix
      _onInit=(action "handleInitSelectedOptionsContainer")
      _onDestroy=(action "handleDestroySelectedOptionsContainer"))
    SelectedOption=(component "select-box/selected-option"
      selectBox=this
      classNamePrefix=@classNamePrefix
      _onActivate=(action "handleActivateSelectedOption")
      _onInit=(action "handleInitSelectedOption")
      _onDestroy=(action "handleDestroySelectedOption"))
    Group=(component "select-box/group"
      classNamePrefix=@classNamePrefix)
    Input=(component "select-box/input"
      selectBox=this
      aria-controls=this.id
      disabled=this.isDisabled
      classNamePrefix=@classNamePrefix
      _onInit=(action "handleInitInput")
      _onDestroy=(action "handleDestroyInput")
      _onInput=(action "handleInputText"))
  ) as |components|}}
    {{yield (merge components this.api)}}
  {{/let}}
</div>